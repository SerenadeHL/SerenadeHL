---
layout: post
title: "Fragment"
date: 2016-12-29
excerpt: "Fragment"
tags: Android
comments: true
---

# Fragment是什么
1. Android3.0之后出现的，是Activity的一部分
2. Fragment可以显示内容，也可以和用户交互
3. Fragment作用：提高代码重用性，提高用户体验，可以对Activity进行模块化管理
4. Fragment有自己的生命周期和接收处理用户的事件，可以添加、移除、替换、显示、隐藏
5. 注意：
    - Fragment必须要显示在Activity中
    - 一个Activity可以包含多个Fragment，一个Fragment可以被多个Activity使用

# 如何创建Fragment
1. 定义一个类，继承Fragment
2. 重写父类的生命周期方法``onCreateView()``
```
/**
 * @param inflater              布局容器加载器
 * @param container             当前Fragment的父容器对象
 * @param savedInstanceState    存放的业务数据
 * @return
 */
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view =inflater.inflate(R.layout.myfragment,container,false);
    return view;
}
```
3. 如何显示Fragment
    - 静态方式显示Fragment
        1. 在Activity对应的页面中通过``<fragment/>``标签引入
        2. 在标签中，必须指定id属性，用来标识Fragment的唯一性
        3. 在标签中，必须指定name属性，用来标识当前显示的是哪个Fragment
    - 动态方式显示Fragment
        1. 在Activity对应的页面中需要通过布局容器占位
            ```
            <RelativeLayout
            android:layout_width="match_parent"
            android:id="@+id/fragment"
            android:layout_weight="1"
            android:layout_height="0dp">
            </RelativeLayout>
            ```
        2. 在Activity代码中：
            1. 得到FragmentManager管理器对象
                ```
                FragmentManager manager = getFragmentManager();
                ```
            2. 通过管理器对象，开启Fragment事务处理
                ```
                FragmentTransaction transaction = manager.beginTransaction();
                ```
            3. 实例化要显示的Fragment
                ```
                MyFragment fragment = new MyFragment();
                ```
            4. 通过事务动态显示Fragment
                ```
                /**
                 - containerViewId  在布局页面中，占位的布局容器的Id
                 - fragment         该位置要显示的Fragment对象
                 */
                transaction.add(R.id.layout_id,fragment);
                //注意：replace()方法第一次进来会创建新的，以后替换
                transaction.replace(R.id.layout_id,fragment);
                ```
            5. 提交事务
                ```
                transaction.commit();
                ```