---
layout: post
title: "Handler"
date: 2017-1-12
excerpt: "Handler"
tags: Android
comments: true
---

# Handler
## Handler的作用
- 在新启动的线程中发送消息
- 在UI线程当中，获取和处理消息
- 注意：
	- Handler既是消息的发送者，也是消息的处理者

## 方法
- ``post(Runnable)``：发送指定Runnable对象
- ``postAtTime(Runnable, long)``：在某时刻发送指定Runnable对象
- ``postDelayed(Runnable, long)``：延迟某段时间后发送指定Runnable对象
	- 注意：post方式会自动调用Runnable对象重写的``run()``方法进行处理
- ``sendEmptyMessage(int)``：发送一条空消息
- ``sendMessage(Message)``：发送指定消息
- ``sendMessageAtTime(Message, long)``：在某时刻发送指定消息
- ``sendMessageDelayed(Message, long)``：延迟某段时间后发送指定消息
	- 注意：send方式需要重写Handler的``handleMessage(Message msg)``方法进行处理





# Message
- Message是线程间传递消息的载体，包括对消息的处理和任意数据类型的处理
- Message中可以包含2个int类型的额外数据和1个Object类型的数据
- 获取Message对象的方法(3种)
	1. 通过构造方法获得(不建议使用)

		```
		Message message = new Message();
		```
	
	2. 通过Message的静态方法
	
		```
		Message message = Message.obtain();
		```
	
	3. 通过Handler的方法
		
		```
		Message message = handler.obtainMessage();
		```
