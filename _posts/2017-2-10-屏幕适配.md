---
layout: post
title: "屏幕适配"
date: 2017-2-10
excerpt: "屏幕适配"
tags: Android
comments: true
---

# 屏幕适配

## 为什么要使用手机屏幕的适配
因为Android手机屏幕尺寸的碎片化和版本的不一致，所以开发就需要做屏幕的适配

## 对哪些屏幕进行适配
需要进行屏幕适配的分辨率
	
- 1280*720
- 1920*1080
- 800*400
- 854*480
- 960*540
- 1184*720

## 什么是屏幕尺寸、屏幕分辨率、屏幕像素密度
- 屏幕尺寸：屏幕对角线的长度，单位为英寸，1英寸=2.54厘米
- 屏幕分辨率：指手机横向和纵向上的像素点数，单位为px，1px=1个像素点
- 屏幕像素密度：每英寸上屏幕像素点数，单位为dpi，它和屏幕尺寸，屏幕的分辨率是相关的，每个像素越多，密度越大，就越清晰

## dp、dip、dpi、sp、px
- px：像素，构成图片的最小单位
- dp和dip：概念相同，与密度无关，以160dpi为基准，1px=1dp，如果按照dp为单位，在不同的分辨率下，dp和px的换算标注是不一样的，在高分辨率的手机上，使用dp作为单位
- sp：根据文字大小进行放缩，一般用sp作为文字大小的单位，Google建议文字的大小不能小于12sp，文字的大小尽量使用偶数，不要使用奇数和小数，如果使用可能会在放缩的时候造成精度的缺失

# 什么是mdpi、hdpi、xhdpi、xxhdpi、xxxhdpi
对于不同手机的像素密度进行区分，在不同的像素密度上，同一张图片显示的效果不一样，想要在不同密度上，显示相同的效果，那么需要在res文件文件夹中对子文件夹进行区分，可以通过为文件夹后面添加限定符，实现了不同的分辨率下显示相同的效果

- mdpi：120dpi ~ 160dpi，图片大小为48*48
- hdpi：160dpi ~ 240dpi，图片大小为72*72
- xhdpi：240dpi ~ 320dpi，图片大小为96*96
- xxhdpi：320dpi ~ 480dpi，图片大小为144*144
- xxxhdpi：480dpi ~ 640dpi

# 解决屏幕适配的问题
- 怎么让应用支持各种屏幕
	1. 尽量使用``wrap_content``、``match_parent``、``layout_weight``定义控件的宽度和高度
	2. 使用相对布局，禁止使用绝对布局
	3. 使用限定符
		- 布局限定符
			- layout：普通的单面板的屏幕
			- layout-large：屏幕尺寸大于7英寸，同时系统版本为3.2以下(最早的平板)
		- 图片限定符
			- mdpi、hdpi、xhdpi、xxhdpi、xxxhdpi
		- 使用屏幕方向的限定符
			- 布局方向的限定符
				- layout(layout-port)：竖屏
				- layout-land：横屏
				- layout-sw600dp-port：大屏幕竖屏
				- layout-sw600dp-land：大屏幕横屏
	4. 使用布局的别名
		- 可以在layout文件中定义不同的布局，在values文件中定义layout.xml文件，引用layout文件中的布局，并且给他们一个统一的名字，针对不同的屏幕尺寸引用不同的界面
	5. 使用自动拉伸的位图(.9图片)
		- 左边和上边的黑线，指定拉伸的部分
		- 右边和下边黑线的交叉区域，指定文字的位置

- 如何支持屏幕的密度(对屏幕密度进行的优化，主要指的是放置图片)
	1. 如果需要设置一下控件或者图片的宽高，则需要使用非密度制约的像素，也就是dp，可以适配屏幕的密度和大小
	2. 提供备用的视图
		- 这样高分辨率的手机显示就不会造成模糊的效果，低分辨率中的手机显示也不会模糊并且不会由内存溢出的问题
- 如何实施自适应屏幕的用户界面的流程
	1. 确定当前布局(得到用户界面的宽度和高度)
	2. 确定当前的布局做出响应，显示的结果是单面板还是双面板
	3. 重复使用碎片
	4. 处理屏幕适配的变化

# 获取屏幕的宽度和高度

```java
//声明窗口管理器对象
WindowManager  manager = (WindowManager) getSystemService(Context.WINDOW_SERVICE);

//获取屏幕宽度和高度的第一种方式
int width= manager.getDefaultDisplay().getWidth();
int height = manager.getDefaultDisplay().getHeight();

Log.e("tag", "width =  "+width + ",height = " + height );
```